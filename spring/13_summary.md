# 9, 13, 14, 16요약

### 9장 쿠키와 세션의 정의

📌**쿠키의 개념**

쿠키는 웹 사이트에 접속할 때 **생성되는 정보를 담은** **임시 파일**

쿠키는 서버가 사용자의 웹 브라우저에 저장하는 데이터를 말합니다.

쿠키의 데이터 형태는 Key 와 Value로 구성되고 String 형태로 이루어져 있습니다.

> 브라우저마다 저장되는 쿠키는 다릅니다. (크롬으로 남긴 쿠키는 인터넷 익스플로어에서 사용할 수 없습니다.)
> 서버에서는 브라우저가 다르면 다른 사용자로 인식합니다.

 

쿠키는 서버를 대신해서 이러한 정보들을 웹 브라우저에 저장

(정확히는, 웹 브라우저를 이용하고 있는 컴퓨터에 저장)하고

사용자가 요청을 할 때 그 정보를 함께 보내서 서버가 사용자를 식별할 수 있게 해줍니다.



![img](https://blog.kakaocdn.net/dn/bZ0rtI/btqBOrN7Fwx/aIwD2Kd3vsOGBWqQfKDzY1/img.png)



📌**쿠키의 사용목적**

쿠키는 주로 아래의 세 가지 목적을 위해 사용됩니다.

\1. **세션 관리**(Session Management) 로그인, 사용자 닉네임, 접속 시간, 장바구니 등의 서버가 알아야할 정보들을 저장합니다.

\2. **개인화**(Personalization) 사용자마다 다르게 그 사람에 적절한 페이지를 보여줄 수 있습니다.

\3. **트래킹**(Tracking) 사용자의 행동과 패턴을 분석하고 기록합니다.

 

📌**쿠키가 사용되는 예시**

쿠키가 있기 때문에 여러 페이지를 이동할 때마다 로그인을 하지 않고 사용자 정보를 유지할 수 있는 것입니다.

쿠키가 없다면 다음 페이지로 정보를 파라미터로 넘겨줘야 합니다.

 

- ID 저장, 로그인 상태 유지
- 일주일간 다시 보지 않기.
- 최근 검색한 상품들을 광고에서 추천
- 쇼핑몰 장바구니 기능



📌**세션의 특징**

세션 아이디는 웹 브라우저 당 1개씩 생성되어 웹 컨테이너에 저장되며 브라우저 종료시 소멸됩니다.

로그인한 사용자에 대해서만 세션을 생성하는 것이 아니라 

로그아웃하면 새로운 사용자로 인식해서 새로운 세션이 생성됩니다.

(참고로 쿠키는 내 웹브라우저에 저장된 것이기 때문에 로그아웃 유무와 관계없이 삭제하지 않으면 유지됩니다.)

 

아이디, 닉네임 등의 정보를 세션에 담아두면 요청이 있을 때 마다, DB에 접근할 필요가 없어서 효율적입니다.

💡**간단요약**



![img](https://blog.kakaocdn.net/dn/c1UC0j/btqBJ7qtIpt/k1b6Pw2heFR9fbesfWeY01/img.png)

쿠키와 세션 비교





출처: https://devuna.tistory.com/23 [튜나 개발일기]



---



### 13장 자바코드를 없애는 액션 태그

>자바 코드 -> 태그 
>
>원래 html태그에는 없는 기능으로써 자바문법을 대신하는 jsp가 제공하는 태그들

태그를 식별(그림)의 기능이 아니라 동작의 기능(코드)으로 발전 시켰다. 근데 이제는 이렇게 안쓴다 예전 방식임

JSP는 스크립트릿의 자바 코드를 제거하고 디자이너 입장에서 더 쉽고 편리하게 작업할 수 있는 태그 형태로 기능을 제공하게 되었고, 다음과 같은 액션 태그들로 자바 코드를 대신하게 되었다. 



#### jsp 액션태그의 종류

- 주요 액션 태그

  ① forward : 다른 페이지의 이동과 같은 페이지의 흐름을 제어한다. // 컨트롤을 누가 갖고 있냐?
  ② include : 외부 페이지의 내용을 포함하거나 페이지를 모듈화 한다. // 디렉티브 include와 차이점
  ③ param : 파라미터를 얻음
  ④ useBean : 자바 빈즈를 사용하기 위해 실제 자바 클래스를 선언하고 초기화한다.
  ⑤ setProperty : 자바빈즈의 property를 설정
  ⑥ getProperty : 자바빈즈의 property를 얻음

​		<jsp:useBean> 객체를 생성하기 위한 new 연산자를 대신하는 태그

​		<jsp:setProperty> setter 를 대신함

​		<jsp:getProperty> getter 를 대신함



**⑤ useBean 액션 태그**
: **자바 빈즈를 사용하기 위해 실제 자바 클래스를 선언하고 초기화**하는 태그
<jsp:useBean id="식별자" class="자바빈즈 이름" scope="범위" />

\- scope 속성 : 자바 빈즈 범위
\- page : 해당 jsp 페이지에서만 운영할 것인지.
\- request : 사용자의 요청을 처리할 동안에만 할 것인지.
\- session : 접속을 종료할 때까지 할 것인지.



출처 : https://jihyeong-ji99hy99.tistory.com/96



---



### 14 표현 언어(EL)와 JSTL

> 정의와 등장배경 정도 알자. 똑같은 기술을 이용하는 다른것으로 쓰인다

`EL`은 **E**xpression **L**anguage의 약자로 직역하면 표현 언어입니다. EL은 JSP에서 자바코드와 JSP 스크립트 코드를 더욱 더 간결하게 하기 위해 등장하였습니다. EL을 이용하면 여러줄에 걸친 자바코드를 간결하게 표현 가능하게 해줍니다.

예를 들어 기존의 JSP 표현식(`<%= =%>`)을 사용하여 요청객체로부터 특정 값을 꺼내와 출력하는 경우의 코드는 아래와 같습니다.

```jsp
<%
   String id = request.getParameter("id");
%>  
 
<%= id %>

그런데 위의 코드를 `EL`로 바꾸면 아래와 같이 바뀝니다.

​```jsp
${param.id}
```

이렇게 불필요한 코드를 매우 줄여주기 때문에 JSP 페이지의 전체적인 코드가 간결해지고 자바코드가 줄어듦으로써 디자인적 요소(HTML, CSS)와 자바코드를 서로 구분하기 쉬워지는 장점이 있습니다.



**JSTL(JSP Standard Tag Library)**

- JSTL: JSP 페이지에서 조건문, 반복문 처리 등을 HTML tag 형태로 작성할 수 있게 해주는 라이브러리



### 표현 언어의 등장 배경

JSP/Servlet에는 여러가지 기술들이 있습니다. Servlet부터 JSP, 액션태그, JSTL, EL 등 너무 많은데 이러한 기술들은 서로를 보완하기 위해 차례대로 기술이 발전함과 동시에 등장하였습니다.

처음에는 `Servlet`만을 사용하다가 Java 코드에 HTML 코드가 마구 섞여 있는 Servlet의 특성상 디자이너와 서버 개발자간의 협업이 어려운점과 유지보수 측면에서 너무 좋지 못한 점으로 인해 `JSP`가 등장했습니다.

그러다가 JSP에서도 HTML과 JSP 스크립트에서의 Java 코드가 마구 섞이게 되자 이를 극복하고자 Java 코드 보다는 HTML과 비슷하게 보이는 `액션태그`가 등장하였고 액션태그의 부족한 기능을 보완하기 위해 `커스텀태그`, `JSTL`, `EL`이 등장한 것입니다. 정리하자면 다음과 같습니다.

1. 최초에는 `Servlet` 위주의 개발. Servlet 코드 안에 디자인적 요소(HTML, CSS)가 덕지덕지 들어가있는 형태로 디자이너와의 협업 및 유지보수에 좋지 못했음.
2. `JSP`라는 스크립트 기반의 기술이 등장하여 Servlet과는 반대로 디자인적 요소(HTML, CSS)에 Java 코드가 섞여있는 느낌의 형태를 가짐.
3. JSP도 코드가 길어질수록 디자인요소와 Java 코드가 복잡하게 섞이게 되어 간결화할 필요가 있어짐.
4. HTML과 같은 태그 기반의 `액션태그`가 등장함.
5. 액션태그의 기능을 직접 개발하여 사용할 수 있는 커스텀 태그가 등장함.
6. 커스텀태그가 많이 쓰이자 이를 공통모듈로 묶은 `JSTL`과 `EL`이 등장하고 JSTL 1.0에 EL이 포함됨.
7. `JSTL`에서만 동작하던 `EL`은 `JSP 2.0`부터 JSP 내부스펙으로 포함됨.
8. `JSP2.3`을 기준으로 `EL`(표현언어)의 버전은 `3.0`임.





출처: https://til-devsong.tistory.com/29 [주니어 개발자의 기록보관소]

출처: https://dololak.tistory.com/746 [코끼리를 냉장고에 넣는 방법]



---

### 16. 제이쿼리 

웹페이지 이동없이 데이터 전달하기

- ajax 사용하기  
  - jQuery 이용하기

- 웹 페이지 일부분의 데이터 변경이 필요할 때
  - 데이터 처리는 서버에서 수행
- 이동 데이터의 형태는 json으로 처리

AJAX가 jQuery 고유의 기능은 아니다. 하지만 jQuery는 간단한 문법으로 AJAX를 사용할 수 있게 도와준다. 

### AJAX

AJAX란 **asynchronous Javascript + XML**이다. 기존의 웹에서는 한 번 페이지를 로딩하면 다른 페이지를 로딩하기 위해서 링크를 타고 넘어가야 했다. 그렇게 되면 흔히 말하는 페이지 깜빡임이 발생한다.

AJAX를 사용하면 이름처럼 **비동기적**으로 서버에 요청을 하여 **페이지 전환 없이**도 다음과 같이 아이디 중복 확인이라는 창과 같이 새로운 데이터를 가져올 수 있다. 

![ajax](../img/ajax.jpg)



- 제이쿼리 AJAX 코드

```jsx
$.ajax({
  url: '주소',
  type: 'get 또는 post',
  async : "true 또는 false",
  data: {
    // 보낼 데이터
  },
  dataType: 'json, xml, script, text 또는 html'
    		'서버에 전송 받을 데이터 형식'
  
  success: {
    //정상 요청, 응답 시 처리
  },
  error: function(xhr,status,error) {
    // 오류 발생 시 처리, 동작
},
  complete: function(data,textStatus) {
    // 작업 완료 후 처리
  }
});
```



- xml 데이터 연동시 find를 사용한다.



### JSON 사용

- name/value 쌍으로 이루어진 데이터 객체를 전달하기 위해 인간이 읽을 수 있는 텍스트를 사용하는 개방형 표준 데이터 형식 

